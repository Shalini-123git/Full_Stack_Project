<% layout('/layouts/boilerplate') -%>
<body>
    <h1>Appointment Details</h1>

    <div class="appointment-card">
        <p><strong>Mother:</strong> <%= appointment[0].mother.username %></p>
        <p><strong>Doctor:</strong> <%= appointment[0].doctor.username %></p>

        <% if (appointment[0].caregiver) { %>
            <p><strong>Caregiver:</strong> <%= appointment[0].caregiver.username %></p>
        <% } else { %>
            <p><strong>Caregiver:</strong> None</p>
        <% } %>

        <p><strong>Booked By:</strong> <%= appointment[0].createdBy.username %> (<%= appointment[0].createdBy.role %>)</p>
        <p><strong>Date & Time:</strong> <%= appointment[0].appointmentDate.toLocaleString() %></p>
        <p><strong>Reason:</strong> <%= appointment[0].reason %></p>

        <% if (appointment[0].notes && appointment[0].notes.trim() !== "") { %>
            <p><strong>Notes:</strong> <%= appointment[0].notes %></p>
        <% } else { %>
            <p><strong>Notes:</strong> None</p>
        <% } %>

        <p><strong>Created At:</strong> <%= appointment[0].createdAt.toLocaleString() %></p>
        <p><strong>Last Updated:</strong> <%= appointment[0].updatedAt.toLocaleString() %></p>
    </div>
    <form method="get" action="/appointments/<%= appointment[0].id %>/edit">
        <button>Edit</button>
    </form>
    <form method="POST" action="/appointments/admin/<%= appointment[0].id %>?_method=DELETE">
        <button>Delete</button>
    </form>
    <a href="/appointments">Back to Appointments</a>

</body>